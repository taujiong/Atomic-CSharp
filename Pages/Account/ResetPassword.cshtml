@page
@using Atomic.UnifiedAuth.Models
@model Atomic.UnifiedAuth.Pages.Account.ResetPassword

@{
  ViewData["Title"] = _localizer["Reset code"];
}

<div class="box">
  <div class="has-text-centered is-size-1 mb-3">@_localizer["Reset code"]</div>

  @if (Model.PasswordReset)
  {
    <div class="block">
      @_localizer["Password has been reset successfully."]
    </div>

    <div class="has-text-centered">
      <a asp-page="./Login" class="button is-primary">
        @_localizer["Back to login"]
      </a>
    </div>
  }
  else
  {
    <div class="block">
      @_localizer["Please enter your new password."]
    </div>

    @await Html.PartialAsync("Shared/_ValidationSummary", new ValidationSummaryModel
    {
      IsValid = ModelState.IsValid,
      SummaryType = ValidationSummary.All,
    })

    <form method="post">
      <input asp-for="Input.UserId">
      <input asp-for="Input.Code">

      <div class="field">
        <label asp-for="Input.Password" class="label"></label>
        <div class="control">
          <input asp-for="Input.Password" class="input">
        </div>
      </div>

      <div class="field">
        <label asp-for="Input.ConfirmPassword" class="label"></label>
        <div class="control">
          <input asp-for="Input.ConfirmPassword" class="input">
        </div>
      </div>

      <button class="button is-primary is-rounded is-fullwidth">
        @_localizer["Reset"]
      </button>
    </form>
  }
</div>
